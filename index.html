<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESECH - Advanced Editing Resources</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #000000;
            --secondary: #1a1a1a;
            --accent: #4285f4;
            --accent-hover: #3367d6;
            --danger: #f44336;
            --success: #4CAF50;
            --text: #e0e0e0;
            --text-secondary: #b0b0b0;
            --card-bg: #252525;
            --card-hover: #333;
            --border: #444;
            --transition: all 0.3s ease;
        }

        [data-theme="light"] {
            --primary: #ffffff;
            --secondary: #f5f5f5;
            --text: #333333;
            --text-secondary: #666666;
            --card-bg: #eeeeee;
            --card-hover: #dddddd;
            --border: #cccccc;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: var(--primary);
            color: var(--text);
            transition: var(--transition);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background-color: var(--secondary);
            color: white;
            padding: 20px 0;
            text-align: center;
            border-radius: 5px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: relative;
        }

        .logo {
            width: 120px;
            height: auto;
            margin-bottom: 15px;
            transition: transform 0.3s;
        }

        .logo:hover {
            transform: rotate(5deg) scale(1.05);
        }

        h1 {
            margin: 0;
            font-size: 2.5em;
            color: var(--accent);
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .owner {
            font-size: 1em;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        .control-panel {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .btn {
            padding: 8px 15px;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .btn-primary {
            background-color: var(--accent);
        }

        .btn-primary:hover {
            background-color: var(--accent-hover);
            transform: translateY(-1px);
        }

        .btn-danger {
            background-color: var(--danger);
        }

        .btn-success {
            background-color: var(--success);
        }

        .section {
            background-color: var(--secondary);
            border-radius: 5px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: var(--transition);
        }

        h2 {
            color: var(--accent);
            border-bottom: 2px solid var(--border);
            padding-bottom: 10px;
            margin-top: 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .link-container {
            margin-bottom: 20px;
        }

        .link-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 12px;
            background-color: var(--card-bg);
            border-radius: 6px;
            transition: var(--transition);
            gap: 10px;
        }

        .link-item:hover {
            background-color: var(--card-hover);
            transform: translateY(-2px);
        }

        .link-item input {
            flex: 1;
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 4px;
            background-color: var(--secondary);
            color: var(--text);
            font-size: 0.95em;
            transition: var(--transition);
        }

        .link-item input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.2);
        }

        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .image-item {
            position: relative;
            overflow: hidden;
            border-radius: 8px;
            box-shadow: 0 3px 5px rgba(0,0,0,0.1);
            transition: var(--transition);
        }

        .image-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .image-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
            transition: var(--transition);
        }

        .image-actions {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
            opacity: 0;
            transition: var(--transition);
        }

        .image-item:hover .image-actions {
            opacity: 1;
        }

        .add-btn {
            display: block;
            width: 100%;
            padding: 12px;
            background-color: var(--card-bg);
            color: var(--text);
            border: 1px dashed var(--border);
            border-radius: 6px;
            text-align: center;
            cursor: pointer;
            margin-top: 15px;
            transition: var(--transition);
            font-weight: 500;
        }

        .add-btn:hover {
            background-color: var(--card-hover);
            border-color: var(--accent);
            color: var(--accent);
        }

        .disclaimer {
            background-color: var(--secondary);
            padding: 15px;
            border-radius: 5px;
            margin-top: 30px;
            font-size: 0.9em;
            color: var(--text-secondary);
            border-left: 4px solid var(--danger);
        }

        .counter-badge {
            background-color: var(--accent);
            color: white;
            border-radius: 10px;
            padding: 2px 8px;
            font-size: 0.8em;
            margin-left: 5px;
        }

        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--success);
            color: white;
            padding: 12px 20px;
            border-radius: 4px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .theme-switcher {
            position: absolute;
            top: 20px;
            right: 20px;
        }

        .language-switcher {
            position: absolute;
            top: 20px;
            left: 20px;
        }

        @media (max-width: 768px) {
            .image-grid {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            }
            
            .image-item img {
                height: 160px;
            }
            
            .theme-switcher, .language-switcher {
                position: static;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body data-theme="dark">
    <div class="container">
        <header>
            <div class="language-switcher">
                <select id="language-selector" onchange="changeLanguage()">
                    <option value="en">English</option>
                    <option value="hi">हिंदी (Hindi)</option>
                </select>
            </div>
            
            <img src="logo.png" alt="ESECH Logo" class="logo">
            <h1>ESECH <span class="counter-badge" id="total-counter">0</span></h1>
            <div class="owner">by Hariom</div>
            
            <div class="theme-switcher">
                <button class="btn btn-primary" onclick="toggleTheme()">
                    <i class="fas fa-moon"></i> <span data-translate="Dark Mode">Dark Mode</span>
                </button>
            </div>
        </header>

        <div class="control-panel">
            <div class="search-bar">
                <input type="text" id="global-search" placeholder="Search resources..." data-translate-placeholder="Search resources...">
                <button class="btn btn-primary" id="search-btn">
                    <i class="fas fa-search"></i> <span data-translate="Search">Search</span>
                </button>
            </div>
            
            <div>
                <button class="btn btn-success" onclick="exportAllData()">
                    <i class="fas fa-download"></i> <span data-translate="Export All">Export All</span>
                </button>
                <button class="btn btn-primary" onclick="importAllData()">
                    <i class="fas fa-upload"></i> <span data-translate="Import All">Import All</span>
                </button>
            </div>
        </div>

        <!-- Section A -->
        <div class="section">
            <h2>
                <span data-translate="Editing Material - Section A">Editing Material - Section A</span>
                <div class="section-controls">
                    <button class="btn btn-success" onclick="exportSection('sectionA')">
                        <i class="fas fa-download"></i> <span data-translate="Export">Export</span>
                    </button>
                    <button class="btn btn-primary" onclick="importSection('sectionA')">
                        <i class="fas fa-upload"></i> <span data-translate="Import">Import</span>
                    </button>
                </div>
            </h2>
            <div class="link-container" id="sectionA-links">
                <!-- Link items will be added here -->
            </div>
            <button class="add-btn" onclick="addLink('sectionA-links')">
                <i class="fas fa-plus"></i> <span data-translate="Add Drivi Link">Add Drivi Link</span>
            </button>
            
            <h3>
                <span data-translate="Images">Images</span>
                <span class="counter-badge" id="sectionA-image-counter">0</span>
            </h3>
            <div class="image-grid" id="sectionA-images">
                <!-- Image items will be added here -->
            </div>
            <button class="add-btn" onclick="addImage('sectionA-images')">
                <i class="fas fa-plus"></i> <span data-translate="Add Image">Add Image</span>
            </button>
        </div>

        <!-- Section B -->
        <div class="section">
            <h2>
                <span data-translate="Editing Material - Section B">Editing Material - Section B</span>
                <div class="section-controls">
                    <button class="btn btn-success" onclick="exportSection('sectionB')">
                        <i class="fas fa-download"></i> <span data-translate="Export">Export</span>
                    </button>
                    <button class="btn btn-primary" onclick="importSection('sectionB')">
                        <i class="fas fa-upload"></i> <span data-translate="Import">Import</span>
                    </button>
                </div>
            </h2>
            <div class="link-container" id="sectionB-links">
                <!-- Link items will be added here -->
            </div>
            <button class="add-btn" onclick="addLink('sectionB-links')">
                <i class="fas fa-plus"></i> <span data-translate="Add Drivi Link">Add Drivi Link</span>
            </button>
            
            <h3>
                <span data-translate="Images">Images</span>
                <span class="counter-badge" id="sectionB-image-counter">0</span>
            </h3>
            <div class="image-grid" id="sectionB-images">
                <!-- Image items will be added here -->
            </div>
            <button class="add-btn" onclick="addImage('sectionB-images')">
                <i class="fas fa-plus"></i> <span data-translate="Add Image">Add Image</span>
            </button>
        </div>

        <div class="disclaimer">
            <strong data-translate="Disclaimer">Disclaimer:</strong> 
            <span data-translate="All materials are collected from Telegram and various websites. This is for educational purposes only.">
                All materials are collected from Telegram and various websites. This is for educational purposes only.
            </span>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <script>
        // Initialize counters
        let linkCounters = {
            'sectionA-links': 0,
            'sectionB-links': 0
        };
        
        let imageCounters = {
            'sectionA-images': 0,
            'sectionB-images': 0
        };

        // Translation dictionary
        const translations = {
            en: {
                "Dark Mode": "Dark Mode",
                "Light Mode": "Light Mode",
                "Search": "Search",
                "Search resources...": "Search resources...",
                "Export All": "Export All",
                "Import All": "Import All",
                "Editing Material - Section A": "Editing Material - Section A",
                "Editing Material - Section B": "Editing Material - Section B",
                "Export": "Export",
                "Import": "Import",
                "Add Drivi Link": "Add Drivi Link",
                "Images": "Images",
                "Add Image": "Add Image",
                "Disclaimer": "Disclaimer",
                "All materials are collected from Telegram and various websites. This is for educational purposes only.": 
                    "All materials are collected from Telegram and various websites. This is for educational purposes only.",
                "Link added successfully!": "Link added successfully!",
                "Image added successfully!": "Image added successfully!",
                "Item removed successfully!": "Item removed successfully!",
                "Maximum __MAX__ links allowed per section.": "Maximum __MAX__ links allowed per section.",
                "Maximum __MAX__ images allowed per section.": "Maximum __MAX__ images allowed per section.",
                "Are you sure you want to remove this item?": "Are you sure you want to remove this item?",
                "Enter new image URL:": "Enter new image URL:",
                "Image updated successfully!": "Image updated successfully!",
                "Section __SECTION__ exported successfully!": "Section __SECTION__ exported successfully!",
                "All data exported successfully!": "All data exported successfully!",
                "Error importing file. Invalid format.": "Error importing file. Invalid format.",
                "Section __SECTION__ imported successfully!": "Section __SECTION__ imported successfully!",
                "All data imported successfully!": "All data imported successfully!",
                "No matching items found": "No matching items found"
            },
            hi: {
                "Dark Mode": "डार्क मोड",
                "Light Mode": "लाइट मोड",
                "Search": "खोजें",
                "Search resources...": "संसाधन खोजें...",
                "Export All": "सभी निर्यात करें",
                "Import All": "सभी आयात करें",
                "Editing Material - Section A": "संपादन सामग्री - सेक्शन A",
                "Editing Material - Section B": "संपादन सामग्री - सेक्शन B",
                "Export": "निर्यात करें",
                "Import": "आयात करें",
                "Add Drivi Link": "ड्रिवी लिंक जोड़ें",
                "Images": "छवियाँ",
                "Add Image": "छवि जोड़ें",
                "Disclaimer": "अस्वीकरण",
                "All materials are collected from Telegram and various websites. This is for educational purposes only.": 
                    "सभी सामग्री Telegram और विभिन्न वेबसाइटों से एकत्र की गई है। यह केवल शैक्षिक उद्देश्यों के लिए है।",
                "Link added successfully!": "लिंक सफलतापूर्वक जोड़ा गया!",
                "Image added successfully!": "छवि सफलतापूर्वक जोड़ी गई!",
                "Item removed successfully!": "आइटम सफलतापूर्वक हटाया गया!",
                "Maximum __MAX__ links allowed per section.": "प्रति सेक्शन अधिकतम __MAX__ लिंक की अनुमति है।",
                "Maximum __MAX__ images allowed per section.": "प्रति सेक्शन अधिकतम __MAX__ छवियों की अनुमति है।",
                "Are you sure you want to remove this item?": "क्या आप वाकई इस आइटम को हटाना चाहते हैं?",
                "Enter new image URL:": "नई छवि URL दर्ज करें:",
                "Image updated successfully!": "छवि सफलतापूर्वक अपडेट की गई!",
                "Section __SECTION__ exported successfully!": "सेक्शन __SECTION__ सफलतापूर्वक निर्यात किया गया!",
                "All data exported successfully!": "सभी डेटा सफलतापूर्वक निर्यात किया गया!",
                "Error importing file. Invalid format.": "फ़ाइल आयात करने में त्रुटि। अमान्य प्रारूप।",
                "Section __SECTION__ imported successfully!": "सेक्शन __SECTION__ सफलतापूर्वक आयात किया गया!",
                "All data imported successfully!": "सभी डेटा सफलतापूर्वक आयात किया गया!",
                "No matching items found": "कोई मिलान आइटम नहीं मिला"
            }
        };

        // Current language
        let currentLang = 'en';

        // Change language function
        function changeLanguage() {
            currentLang = document.getElementById('language-selector').value;
            document.querySelectorAll('[data-translate], [data-translate-placeholder]').forEach(el => {
                const key = el.getAttribute('data-translate') || el.getAttribute('data-translate-placeholder');
                if (key) {
                    if (el.hasAttribute('data-translate-placeholder')) {
                        el.placeholder = translations[currentLang][key] || key;
                    } else {
                        el.textContent = translations[currentLang][key] || key;
                    }
                }
            });
            
            // Update theme button text
            const themeBtn = document.querySelector('[onclick="toggleTheme()"] span');
            const isDark = document.body.getAttribute('data-theme') === 'dark';
            themeBtn.textContent = translations[currentLang][isDark ? 'Dark Mode' : 'Light Mode'];
            
            showToast(translations[currentLang]["Language changed successfully!"]);
        }

        // Toggle theme function
        function toggleTheme() {
            const isDark = document.body.getAttribute('data-theme') === 'dark';
            document.body.setAttribute('data-theme', isDark ? 'light' : 'dark');
            
            // Update button text
            const themeBtn = document.querySelector('[onclick="toggleTheme()"] span');
            themeBtn.textContent = translations[currentLang][isDark ? 'Light Mode' : 'Dark Mode'];
            
            // Save preference
            localStorage.setItem('theme', isDark ? 'light' : 'dark');
        }

        // Show toast notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.style.backgroundColor = type === 'success' ? 'var(--success)' : 'var(--danger)';
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Update counters
        function updateCounters() {
            // Update section counters
            for (const section in imageCounters) {
                const counterElement = document.getElementById(`${section}-counter`);
                if (counterElement) {
                    counterElement.textContent = imageCounters[section];
                }
            }
            
            // Update total counter
            const totalLinks = Object.values(linkCounters).reduce((a, b) => a + b, 0);
            const totalImages = Object.values(imageCounters).reduce((a, b) => a + b, 0);
            document.getElementById('total-counter').textContent = totalLinks + totalImages;
        }

        // Add link function
        function addLink(sectionId) {
            const maxLinks = 15;
            if (linkCounters[sectionId] >= maxLinks) {
                showToast(
                    translations[currentLang]["Maximum __MAX__ links allowed per section."].replace('__MAX__', maxLinks),
                    'danger'
                );
                return;
            }
            
            linkCounters[sectionId]++;
            const container = document.getElementById(sectionId);
            
            const linkItem = document.createElement('div');
            linkItem.className = 'link-item';
            linkItem.innerHTML = `
                <input type="text" placeholder="${translations[currentLang]['Enter drivi link...'] || 'Enter drivi link (e.g., drivi123)'}">
                <button class="btn btn-danger" onclick="removeItem(this.parentElement, '${sectionId}', 'link')">
                    <i class="fas fa-trash"></i> ${translations[currentLang]['Remove'] || 'Remove'}
                </button>
            `;
            
            container.appendChild(linkItem);
            updateCounters();
            showToast(translations[currentLang]["Link added successfully!"]);
        }

        // Add image function
        function addImage(sectionId) {
            const maxImages = 20;
            if (imageCounters[sectionId] >= maxImages) {
                showToast(
                    translations[currentLang]["Maximum __MAX__ images allowed per section."].replace('__MAX__', maxImages),
                    'danger'
                );
                return;
            }
            
            imageCounters[sectionId]++;
            const container = document.getElementById(sectionId);
            
            const imageItem = document.createElement('div');
            imageItem.className = 'image-item';
            imageItem.innerHTML = `
                <img src="https://via.placeholder.com/200?text=Image+${imageCounters[sectionId]}" alt="Editing Resource ${imageCounters[sectionId]}">
                <div class="image-actions">
                    <button class="btn btn-danger" onclick="removeItem(this.parentElement.parentElement, '${sectionId}', 'image')">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="btn btn-primary" onclick="changeImage(this.parentElement.parentElement)">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
            `;
            
            container.appendChild(imageItem);
            updateCounters();
            showToast(translations[currentLang]["Image added successfully!"]);
        }

        // Remove item function
        function removeItem(element, sectionId, type) {
            if (confirm(translations[currentLang]["Are you sure you want to remove this item?"])) {
                element.remove();
                if (type === 'link') {
                    linkCounters[sectionId]--;
                } else {
                    imageCounters[sectionId]--;
                }
                updateCounters();
                showToast(translations[currentLang]["Item removed successfully!"]);
            }
        }

        // Change image function
        function changeImage(element) {
            const newUrl = prompt(translations[currentLang]["Enter new image URL:"]);
            if (newUrl) {
                element.querySelector('img').src = newUrl;
                showToast(translations[currentLang]["Image updated successfully!"]);
            }
        }

        // Export section data
        function exportSection(sectionId) {
            const links = [];
            document.querySelectorAll(`#${sectionId} .link-item input`).forEach(input => {
                if (input.value.trim()) {
                    links.push(input.value.trim());
                }
            });
            
            const images = [];
            document.querySelectorAll(`#${sectionId} .image-item img`).forEach(img => {
                images.push(img.src);
            });
            
            const data = {
                section: sectionId,
                links: links,
                images: images,
                timestamp: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ESECH-${sectionId}-${new Date().toISOString().slice(0,10)}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast(translations[currentLang]["Section __SECTION__ exported successfully!"].replace('__SECTION__', sectionId));
        }

        // Import section data
        function importSection(sectionId) {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = e => {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = event => {
                    try {
                        const data = JSON.parse(event.target.result);
                        
                        // Clear existing items
                        document.getElementById(`${sectionId}`).querySelector('.link-container').innerHTML = '';
                        document.getElementById(`${sectionId}`).querySelector('.image-grid').innerHTML = '';
                        
                        // Reset counters
                        linkCounters[`${sectionId}`] = 0;
                        imageCounters[`${sectionId}`] = 0;
                        
                        // Add links
                        data.links.forEach(link => {
                            linkCounters[`${sectionId}`]++;
                            const container = document.getElementById(`${sectionId}`).querySelector('.link-container');
                            
                            const linkItem = document.createElement('div');
                            linkItem.className = 'link-item';
                            linkItem.innerHTML = `
                                <input type="text" value="${link}">
                                <button class="btn btn-danger" onclick="removeItem(this.parentElement, '${sectionId}', 'link')">
                                    <i class="fas fa-trash"></i> ${translations[currentLang]['Remove'] || 'Remove'}
                                </button>
                            `;
                            
                            container.appendChild(linkItem);
                        });
                        
                        // Add images
                        data.images.forEach(imgSrc => {
                            imageCounters[`${sectionId}`]++;
                            const container = document.getElementById(`${sectionId}`).querySelector('.image-grid');
                            
                            const imageItem = document.createElement('div');
                            imageItem.className = 'image-item';
                            imageItem.innerHTML = `
                                <img src="${imgSrc}" alt="Imported Image">
                                <div class="image-actions">
                                    <button class="btn btn-danger" onclick="removeItem(this.parentElement.parentElement, '${sectionId}', 'image')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                    <button class="btn btn-primary" onclick="changeImage(this.parentElement.parentElement)">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                            `;
                            
                            container.appendChild(imageItem);
                        });
                        
                        updateCounters();
                        showToast(translations[currentLang]["Section __SECTION__ imported successfully!"].replace('__SECTION__', sectionId));
                    } catch (error) {
                        showToast(translations[currentLang]["Error importing file. Invalid format."], 'danger');
                        console.error(error);
                    }
                };
                reader.readAsText(file);
            };
            
            input.click();
        }

        // Export all data
        function exportAllData() {
            const allData = {};
            
            // Get data from all sections
            document.querySelectorAll('.section').forEach(section => {
                const sectionId = section.id;
                const links = [];
                section.querySelectorAll('.link-item input').forEach(input => {
                    if (input.value.trim()) {
                        links.push(input.value.trim());
                    }
                });
                
                const images = [];
                section.querySelectorAll('.image-item img').forEach(img => {
                    images.push(img.src);
                });
                
                allData[sectionId] = {
                    links: links,
                    images: images
                };
            });
            
            const blob = new Blob([JSON.stringify(allData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ESECH-All-Data-${new Date().toISOString().slice(0,10)}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast(translations[currentLang]["All data exported successfully!"]);
        }

        // Import all data
        function importAllData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = e => {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = event => {
                    try {
                        const allData = JSON.parse(event.target.result);
                        
                        // Process each section
                        for (const sectionId in allData) {
                            const data = allData[sectionId];
                            const sectionElement = document.getElementById(sectionId);
                            
                            if (sectionElement) {
                                // Clear existing items
                                sectionElement.querySelector('.link-container').innerHTML = '';
                                sectionElement.querySelector('.image-grid').innerHTML = '';
                                
                                // Reset counters
                                linkCounters[sectionId] = 0;
                                imageCounters[sectionId] = 0;
                                
                                // Add links
                                data.links.forEach(link => {
                                    linkCounters[sectionId]++;
                                    const container = sectionElement.querySelector('.link-container');
                                    
                                    const linkItem = document.createElement('div');
                                    linkItem.className = 'link-item';
                                    linkItem.innerHTML = `
                                        <input type="text" value="${link}">
                                        <button class="btn btn-danger" onclick="removeItem(this.parentElement, '${sectionId}', 'link')">
                                            <i class="fas fa-trash"></i> ${translations[currentLang]['Remove'] || 'Remove'}
                                        </button>
                                    `;
                                    
                                    container.appendChild(linkItem);
                                });
                                
                                // Add images
                                data.images.forEach(imgSrc => {
                                    imageCounters[sectionId]++;
                                    const container = sectionElement.querySelector('.image-grid');
                                    
                                    const imageItem = document.createElement('div');
                                    imageItem.className = 'image-item';
                                    imageItem.innerHTML = `
                                        <img src="${imgSrc}" alt="Imported Image">
                                        <div class="image-actions">
                                            <button class="btn btn-danger" onclick="removeItem(this.parentElement.parentElement, '${sectionId}', 'image')">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                            <button class="btn btn-primary" onclick="changeImage(this.parentElement.parentElement)">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                        </div>
                                    `;
                                    
                                    container.appendChild(imageItem);
                                });
                            }
                        }
                        
                        updateCounters();
                        showToast(translations[currentLang]["All data imported successfully!"]);
                    } catch (error) {
                        showToast(translations[currentLang]["Error importing file. Invalid format."], 'danger');
                        console.error(error);
                    }
                };
                reader.readAsText(file);
            };
            
            input.click();
        }

        // Search functionality
        document.getElementById('search-btn').addEventListener('click', function() {
            const searchTerm = document.getElementById('global-search').value.toLowerCase();
            if (!searchTerm) return;
            
            let found = false;
            
            // Search in links
            document.querySelectorAll('.link-item input').forEach(input => {
                const value = input.value.toLowerCase();
                if (value.includes(searchTerm)) {
                    input.parentElement.style.backgroundColor = 'var(--accent)';
                    input.parentElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    found = true;
                } else {
                    input.parentElement.style.backgroundColor = '';
                }
            });
            
            if (!found) {
                showToast(translations[currentLang]["No matching items found"], 'danger');
            }
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Set theme from localStorage
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.body.setAttribute('data-theme', savedTheme);
            
            // Update theme button text
            const themeBtn = document.querySelector('[onclick="toggleTheme()"] span');
            themeBtn.textContent = translations[currentLang][savedTheme === 'dark' ? 'Dark Mode' : 'Light Mode'];
            
            // Set language from localStorage if available
            const savedLang = localStorage.getItem('language') || 'en';
            document.getElementById('language-selector').value = savedLang;
            currentLang = savedLang;
            changeLanguage();
            
            // Update counters
            updateCounters();
        });
    </script>
</body>
</html>